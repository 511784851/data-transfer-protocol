syntax = "proto3";
package common;
option java_package = "com.oleaster.blemobi.probuf";
option java_outer_classname = "LoginProtos";


message PLogin {
	int32 type = 1;	    	//固定为1
	/*保留2~5用于扩展*/
	string uuid = 6;      	//用户ID
	string token = 7;		//统一访问令牌
	string name = 8;		//用户昵称
	string portrait = 9;	//用户头像URL
	repeated int32 loginTypes = 10; //第三方登录类型(1 微信,2 微博,3 facebook,4 google)
	
	//其它需要下发的信息...
}

message PLoginType {
	int32 type = 1; //固定为4
	repeated int32 types = 2; //可用的第三方登录类型(1 微信,2 微博,3 facebook,4 google)
}

/*
 *@note 设备激活
 *@path /device/active
 *@return 返回PLoginType
*/

/*
 *@note 微信首次登录
 *@path /app/wechat
 *@param code 授权临时票据(authorization code)
 *@param ostp 操作系统类型 0未知、1Android、2IOS
 *@param osv 操作系统版本
 *@param model 设备型号
 *@param imei 手机取IMEI，无IMEI用WIFI的MAC地址
 *@param channel 渠道或应用平台
 *@return 登录成功返回PLogin，失败返回PResult
 */

/*
 *@note 微博首次登录
 *@path /app/weibo
 *@param wbuid 用户微博uid
 *@param wbname 用户微博昵称
 *@param headimgurl 用户微博头像地址
 *@param gender 性别
 *@param weihao 用户微号
 *@param ostp 操作系统类型 0未知、1Android、2IOS
 *@param osv 操作系统版本
 *@param model 设备型号
 *@param imei 手机取IMEI，无IMEI用WIFI的MAC地址
 *@param channel 渠道或应用平台
 *@return 登录成功返回PLogin，失败返回PResult
 */

 /*
 *@note facebook首次登录
 *@path /app/facebook
 *@param token Facebook User access token
 *@param ostp 操作系统类型 0未知、1Android、2IOS
 *@param osv 操作系统版本
 *@param model 设备型号
 *@param imei 手机取IMEI，无IMEI用WIFI的MAC地址
 *@param channel 渠道或应用平台
 *@return 登录成功返回PLogin，失败返回PResult
 */
 
 /*
 *@note google首次登录
 *@path /app/google
 *@param code 授权临时票据(authorization code)
 *@param token 登陆验证数据(id token)
 *@param ostp 操作系统类型 0未知、1Android、2IOS
 *@param osv 操作系统版本
 *@param model 设备型号
 *@param imei 手机取IMEI，无IMEI用WIFI的MAC地址
 *@param channel 渠道或应用平台
 *@return 登录成功返回PLogin，失败返回PResult
 */
  
/*
 *@note 手机号登录
 *@path /app/login
 *@param cellphone 手机号
 *@param password 密码
 *@param ostp 操作系统类型 0未知、1Android、2IOS
 *@param osv 操作系统版本
 *@param model 设备型号
 *@param imei 手机取IMEI，无IMEI用WIFI的MAC地址
 *@param channel 渠道或应用平台
 *@return 登录成功返回PLogin，失败返回PResult
 */

/*
 *@note 手机号注册
 *@path /app/register
 *@param cellphone 手机号
 *@param password 密码
 *@param nickname 昵称
 *@param verifycode 发送给手机的验证码
 *@param ostp 操作系统类型 0未知、1Android、2IOS
 *@param osv 操作系统版本
 *@param model 设备型号
 *@param imei 手机取IMEI，无IMEI用WIFI的MAC地址
 *@param channel 渠道或应用平台
 *@return 注册成功返回PLogin，失败返回PResult
 */

/*
 *@note 令牌校验，打开App时若令牌信息存在，直接校验
 *@path /app/checktoken
 *@cookie token&uuid
 *@return 令牌有效或成功续期返回PLogin，失败返回PResult
 */
 
/*
 *@note 登出
 *@path /app/logout
 *@cookie token&uuid
 *@return 返回PResult
 */
 
 
/*
 *@note 取用户信息
 *@path /app/user/get
 *@cookie token&uuid
 *@return 成功返回PUser，失败返回PResult
 */
 

message PUser {
	int32 type = 1;	    	//固定为2
	/*保留2~5用于扩展*/
	
	string nickname = 6;
	string realname = 7;
	string portrait = 8;
	int32 gender = 9;		//性别 0女，1男
	string birthday = 10;
	string email = 11;
}

/*
 *@note 更新用户信息
 *@path /app/user/set
 *@cookie token&uuid
 *@param nickname 昵称
 *@param realname 真实姓名
 *@param gender 性别
 *@param birthday 生日
 *@param email 电子邮件
 *@return 返回PResult
 */

/*
 *@note 生成短信验证码
 *@path /msgcode
 *@param cellphone 手机号
 *@return 返回PResult
 */

/*
 *@note 修改密码
 *@path /app/change_pwd
 *@cookie userId & token
 *param newpwd 新密码
 *param oldpwd 旧密码
 *@return 返回PResult
 */

/*
 *@note 忘记密码
 *@URL /app/reset_pwd
 *param mobile 手机号码
 *param msgcode 验证码
 *param newpwd 新密码
 *@return 返回PResult
 */
 
message PAccount{
	int32 type = 1;	    		//固定为3
	string cellphone = 2;		//手机号
	string wechat = 3;			//微信用户ID信息
	string weibo = 4;			//微博用户ID信息
	string google = 5;			//google用户ID信息
	string facebook = 6;		//facebook用户ID信息
} 
 
/*
 *@note 取帐号信息，包括绑定的手机号、微信、微博、google、facebook
 *@URL /app/account/get
 *@cookie token&uuid
 *@return 成功返回PAccount，失败返回PResult
 */
 
/*
 *@note 绑定手机号登录方式
 *@URL /app/cellphone/set
 *@cookie token&uuid
 *@param cellphone 手机号
 *@return 成功返回PAccount，失败返回PResult
 */

/*
 *@note 绑定微信登录方式
 *@URL /app/wechat/set
 *@cookie token&uuid
 *@param code 授权临时票据(authorization code)
 *@return 成功返回PAccount，失败返回PResult
 */
 
 /*
 *@note 绑定微博登录方式
 *@URL /app/weibo/set
 *@cookie token&uuid
 *@param wbuid 用户微博uid
 *@param wbname 用户微博昵称
 *@param headimgurl 用户微博头像地址
 *@param weihao 用户微号
 *@return 成功返回PAccount，失败返回PResult
 */
 
 /*
 *@note 绑定google登录方式
 *@URL /app/google/set
 *@cookie token&uuid
 *@param code 授权临时票据(authorization code)
 *@param token 登陆验证数据(id token)
 *@return 成功返回PAccount，失败返回PResult
 */
 
 /*
 *@note 绑定facebook登录方式
 *@URL /app/facebook/set
 *@cookie token&uuid
 *@param token Facebook User access token
 *@return 成功返回PAccount，失败返回PResult
 */
