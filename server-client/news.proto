syntax = "proto3";
package common;
option java_package = "com.blemobi.demo.probuf";
option java_outer_classname = "NewsProtos";

//微博列表
message PNews {
	repeated PArticle articles = 1; //博文列表
}

//微博信息
message PArticle {
	int32 id = 1; 				//博文的ID
	string uuid = 2; 			//博文的作者
	string userName = 3; 		//作者名称
	string userHead = 4; 		//作者头像
	string content = 5; 		//文章正文(如果正文是保存的OSS上，那么这里是一个url)
	string srcType = 6; 		//资源的类型（image表示上传的是图片，video表示上传的是视频，audio表示上传的是音频）
	repeated PImage images = 7; //图片（最多九张）
	PVideo video = 8; 			//视频
	PAudio audio = 9; 			//音频
	bool onOSS = 10; 			//正文是否在oss上
	int64 pubishTime = 11; 	//发布时间
	string position = 12; 		//位置
	string tag = 13; 			//标签（多个可以用‘,’分隔）
}

//图片
message PImage {
	string url = 1;
	repeated PImageAD aDList = 2; //图片的热点广告 
}

//视频
message PVideo {
	string url = 1; //视频在OSS上的路径
	string img = 2; //视频的缩略图
	repeated PVideoTag tags = 3; //视频的标签
	int64 expires = 4; //视频的有效期
}

//音频
message PAudio {
	string url = 1; //音频在OSS上的路径
	int32 length = 2; //音频长度
	int64 expires = 3; //音频的有效期
}

//图片的热点广告
message PImageAD {
	float x = 1;
	float y = 2;
	string title = 3; //广告名称
	float price = 4; //价格
	int32 category = 5; //分类
	string url = 6; //广告链接
}

//视频的标签
message PVideoTag {
	float x = 1;
	float y = 2;
	string text = 3; //标签内容
}



/**
 *@note 发布微博
 *@path /news/publish
 *@cookie token&uuid
 *@method POST
 *@param article PArticle数据流
	images.url/video.url/audio.url 这些个url传的是pupload的objectKey
 *@return PResult
 */
 
 
 /**
  *@note 获取资源文件在oss上的状态（包括大于30个字的文字）
  *@path /news/src/status
  *@cookie token&uuid
  *@method GET
  *@param digest 要上传的文件的md5 hexstring
  *@param length 文件大小，字节
  *@param extension 扩展名 如jpg,png,gif,bmp,mp3,apk等(如果是纯的文本流可以不填写扩展名)
  *@return 成功返回PUpload，失败返回PResult
  */
  
 /**
  *@note 获取多个资源文件在oss上的状态（如多个图片）
  *@path /news/src/status/multi
  *@cookie token&uuid
  *@method GET
  *@body PFileInfoArray
  *@return 成功返回PUploadArray，失败返回PResult
  */
 
 
 /**
  *@note 微博刷新
  *@path /news/list
  *@cookie token&uuid
  *@method GET
  *@param history 刷新到最后一篇文章的时间还想看更多的文章，那么必须传这个参数，为晚于最后一篇文章的发布时间的时间，否则填0
  *@return PNews
  */

 /**
  *@note 关注/取消关注
  *@path /news/relation
  *@cookie token&uuid
  *@method GET
  *@param uuid 关注/本关注对象的id
  *@param do 为1时表示添加关注，为0时表示取消关注
  *@return PResult
  */