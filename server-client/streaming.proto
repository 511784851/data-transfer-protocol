syntax = "proto3";
package common;
option java_package = "com.blemobi.sep.probuf";
option java_outer_classname = "StreamingProtos";

message PWebSiteInfo {
	string name = 1; // 中文名称
	string url = 2; // 网站网址
}

//支持的第三方直播网站列表,以后简称网站列表
message PWebSiteList {
	repeated PWebSiteInfo list = 1;
}

// 第三方直播通知房间信息
message PStreamingRoomInfo {
    PWebSiteInfo webSite = 1; // 网站(直播平台)
    string Number = 2; // 房间号
    string url = 3; // 房间url
}

message PStreamingRoomList {
    repeated PStreamingRoomInfo list = 1;
}

// 第三方直播通知主播手动提醒通知
message PStreamingManualInfo {
    string anchor = 1; // 主播uuid
    PStreamingRoomInfo room = 2; // 房间
    int64 liveTime = 3; // 直播时间,unix时间戳,精确到秒
    int64 noticeTime = 4; // 提醒时间,unix时间戳,精确到秒
}


message PStreamingManualList {
    repeated PStreamingManualInfo list = 1;
}

// 第三方直播通知直播记录
message PStreamingLiveInfo {
    string anchor = 1; // 主播uuid
    PStreamingRoomInfo room = 2; // 直播房间
    int64 liveTime = 3; // 直播时间,unix时间戳,精确到秒
    int64 noticeTime = 4; // 提醒时间,unix时间戳,精确到秒
    int64 clickCount = 5; // 点击人数
    bool isOpen = 6; // 是否进行中
}

message PStreamingLiveList {
    repeated PStreamingLiveInfo list = 1;
}

message PStreamingConfigInfo {
    string chinese = 1; // 中文名
    string english = 2; // 英文名
    int64 value = 3; // 值
}

// 第三方直播通知系统参数
message PStreamingConfigList {
    repeated PStreamingConfigInfo list = 1;
}

// 第三方直播通知主播信息
message PStreamingAnchor {
    string uuid = 1; // 主播uuid
    PStreamingRoomList rooms = 2; // 房间列表
    int64 dayCount = 3; // 每天通知次数限制
    int64 manualDayCount = 4; // 每天手动通知次数限制
    int64 liveCount = 5; // 直播次数
    int64 lastPushTime = 6; // 最后一次通知时间,unix时间戳,精确到秒
    PStreamingLiveInfo lastLive = 7; // 最后一次直播
    bool isShield = 8; // 监管平台是否屏蔽
    bool isClose = 9; // 是否开启直醒通知
}

// 第三方直播通知主播列表
message PStreamingAnchorList {
    repeated PStreamingAnchor list = 1;
}

/**************************API 定义***********************************/

/*
 *@note 获取网站列表
 *@path /streaming-notification/websites
 *@cookie token&uuid
 *@method GET
 *@return 成功返回PWebSiteList,失败返回PResult
 */

/*
 *@note 分页获取主播手动提醒通知
 *@uri /streaming-notification/anchor/manual/broadcast
 *@param GET
 *@cookie token&uuid 登录用户信息
 *@param uuid 主播的uuid
 *@param offset 偏移量,第一次填0,以后offoset=offset+count
 *@param count 数量,默认值20,范围[15,30]
 *@return 成功返回PStreamingManualInfo, 失败返回PResult
 */

/*
 *@note 增加主播手动提醒通知
 *@uri /streaming-notification/anchor/manual/broadcast
 *@param POST
 *@cookie token&uuid 登录用户信息
 *@param PStreamingManualInfo
 *@return 返回PResult
 */

/*
 *@note 撤销/删除主播手动提醒通知
 *@uri /streaming-notification/anchor/manual/broadcast
 *@param DELETE
 *@cookie token&uuid 登录用户信息
 *@param PStreamingManualInfo
 *@return 返回PResult
 */

/*
 *@note 粉丝开关提醒通知
 *@uri /streaming-notification/fan/change/broadcast
 *@param GET
 *@cookie token&uuid 登录用户信息
 *@param status 0表示关闭,其他表示开启
 *@param scope all表示全部网站,website表示指定网站(直播平台),anchor表示指定主播
 *@param value scope为all,忽略此参数,scope为website,此参数为网站名称,scope为anchor,此参数为主播uuid
 *@return 返回PResult
 */

/*
 *@note 粉丝进入直播房间,目的是统计直播房间的观看人数
 *@uri /streaming-notification/fan/entry/room
 *@param POST
 *@cookie token&uuid 登录用户信息
 *@param PStreamingLiveInfo
 *@return 返回PResult
 */